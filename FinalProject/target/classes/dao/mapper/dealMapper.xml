<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
 PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 
 <mapper namespace="dao.DealDao">
	<select id="selectAll" parameterType="String" resultType="Board">
		select * from board where writer=#{id} and state in(0,1,2)
	</select>
	
	<select id="purchaseCount" parameterType="int" resultType="int">
		select count(no) from purchase where state=0 and no=#{no}
	</select>
	
	<select id="purchase" parameterType="String" resultType="Purchase">
		select * from purchase where purchaser=#{id} and state in(0, 1, 2, 10, 11)
	</select>
	
	<select id="purchaseList" parameterType="int" resultType="Purchase">
		select * from purchase where no=#{no} and state in(0, 1, 2)
	</select>
	
	<select id="purchaseOption" parameterType="int" resultType="PurchaseOption">
		select * from purchase_option where no=#{no}
	</select>
	
	<update id="progressState">
		update purchase set state=#{state} where purchase_no=#{purchase_no}
	</update>
	
	<select id="boardInfo" parameterType="int" resultType="Board">
		select * from board where no=#{no}
	</select>
	
	<select id="ongoingPurcharse" parameterType="int" resultType="Purchase">
		select * from purchase where no=#{no} and state=10
	</select>
	
	<select id="completionPurcharse" parameterType="int" resultType="Purchase">
		select * from purchase where no=#{no} and state in(11, 20, 30)
	</select>
	
	<select id="purchaseComplete" parameterType="String" resultType="Purchase">
		select * from purchase where purchaser=#{id} and state in(20, 30)
	</select>
 </mapper>
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 