<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
 PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 
 <mapper namespace="dao.BoardDao">
<!--  table명 : board -->
 <insert id="insertBoard" parameterType="java.util.HashMap">
 	insert into board values(0, #{major}, #{minor}, #{title}, #{id}, #{content}, sysdate(), #{end_date}, 
 	#{limit}, 0, #{price}, #{optionprice}, 0, 0, 0, 0)
 		<selectKey keyProperty="no" order="AFTER" resultType="int">
 			select max(no) as no from board
 		</selectKey>
 </insert>
 
 <delete id="deleteBoard" parameterType="int">
 	delete from board where no=#{no}
 </delete>
 
 <update id="updateBoard" parameterType="java.util.HashMap">
 	update board set category_major=#{major}, category_minor=#{minor}, title=#{title}, writer=#{id}, content=#{content}, date=sysdate(), end_date=#{end_date}, limit=#{limit}, state=0,
 	price=#{price}, optionprice=#{optionprice}, read_count=#{read_count}, premium=#{premium}, total_star=#{total_star}, num_evaluator=#{num_evaluator} where no=#{no}
 </update>
 
 <select id="selectOneBoard" parameterType="int" resultType="Board">
 	select * from board where no=#{no}
 </select>
 
 <select id="selectAllBoard" parameterType="Board" resultType="Board">
 	select * from board
 </select>
 
<!--  table명 : map -->
 <insert id="insertMap" parameterType="java.util.HashMap">
 	insert into map values(0, #{lat}, #{lng}, #{info_title}, #{info_address}, #{info_address2}, #{no})
 </insert>
 
 <update id="updateMap" parameterType="java.util.HashMap">
 	update map set lat=#{lat}, lng=#{lng}, title=#{title}, address=#{address}, address2=#{address2} board_no=#{board_no} where no=#{no}
 </update>
 
 <delete id="deleteMap" parameterType="int">
 	delete from map where no=#{no}
 </delete>
 
 <select id="selectOneMap" parameterType="int" resultType="MapInfo">
 	select * from map where board_no=#{board_no}
 </select>

<!-- table명 : file -->
 <insert id="insertFile" parameterType="java.util.HashMap">
	insert into file values(0, #{no}, #{file_name1}, #{file_name2}, #{file_name3}, #{file_name4})
 </insert>
 
 <update id="updateFile" parameterType="java.util.HashMap">
 	update file set file_name1=#{file_name1}, file_name2=#{file_name2}, file_name3=#{file_name3}, file_name4=#{file_name4} where no=#{no}
 </update>
 
 <delete id="deleteFile" parameterType="int">
 	delete from file where no=#{no}
 </delete>
 
 <select id="selectOneFromFile" parameterType="int" resultType="File">
 	select * from file where no=#{no}
 </select>
 
 
<!--  table명 : board_option -->
 <insert id="insertBoard_option" parameterType="java.util.HashMap">
	insert into board_option values(0, #{no}, #{kind}, #{price})
 </insert>
 
 <update id="updateBoard_option" parameterType="java.util.HashMap">
 	update board_option set kind=#{kind}, price=#{price} where no=#{no}
 </update>
 
 <delete id="deleteBoard_option" parameterType="int">
 	delete from board_option where no=#{no}
 </delete>
 
 <select id="selectBoard_option" parameterType="int" resultType="java.util.HashMap">
 	select * from board_option where no=#{no}
 </select>
 
 <select id="selectKind" parameterType="java.util.HashMap" resultType="java.util.HashMap">
 	select * from board_option where no=#{no} and kind=#{kind}
 </select>
 
 </mapper>
 
 
 
 
 
 
 
 